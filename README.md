# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [apiClient](#apiclient)
    -   [Parameters](#parameters)
-   [url](#url)
-   [isRequest](#isrequest)
    -   [Parameters](#parameters-1)
-   [rpc](#rpc)
    -   [Parameters](#parameters-2)
-   [length](#length)
-   [map](#map)
    -   [Parameters](#parameters-3)
-   [forEach](#foreach)
    -   [Parameters](#parameters-4)
-   [url](#url-1)
-   [model](#model)
    -   [Parameters](#parameters-5)
-   [toJS](#tojs)
-   [toArray](#toarray)
-   [slice](#slice)
-   [peek](#peek)
-   [isEmpty](#isempty)
-   [\_ids](#_ids)
-   [at](#at)
    -   [Parameters](#parameters-6)
-   [get](#get)
    -   [Parameters](#parameters-7)
-   [filter](#filter)
    -   [Parameters](#parameters-8)
-   [find](#find)
    -   [Parameters](#parameters-9)
-   [add](#add)
    -   [Parameters](#parameters-10)
-   [reset](#reset)
    -   [Parameters](#parameters-11)
-   [remove](#remove)
    -   [Parameters](#parameters-12)
-   [set](#set)
    -   [Parameters](#parameters-13)
-   [build](#build)
    -   [Parameters](#parameters-14)
-   [create](#create)
    -   [Parameters](#parameters-15)
-   [fetch](#fetch)
    -   [Parameters](#parameters-16)
-   [toJS](#tojs-1)
-   [primaryKey](#primarykey)
-   [urlRoot](#urlroot)
-   [url](#url-2)
-   [isNew](#isnew)
-   [get](#get-1)
    -   [Parameters](#parameters-17)
-   [has](#has)
    -   [Parameters](#parameters-18)
-   [id](#id)
-   [changedAttributes](#changedattributes)
-   [changes](#changes)
-   [hasChanges](#haschanges)
    -   [Parameters](#parameters-19)
-   [reset](#reset-1)
    -   [Parameters](#parameters-20)
-   [set](#set-1)
    -   [Parameters](#parameters-21)
-   [fetch](#fetch-1)
    -   [Parameters](#parameters-22)
-   [applyPatchChanges](#applypatchchanges)
    -   [Parameters](#parameters-23)
-   [save](#save)
    -   [Parameters](#parameters-24)
-   [destroy](#destroy)
    -   [Parameters](#parameters-25)

## apiClient

Sets or gets the api client instance

### Parameters

-   `adapter` **Adapter** 
-   `options` **{}**  (optional, default `{}`)

Returns **Adapter** 

## url

Returns the resource's url.

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

## isRequest

Questions whether the request exists
and matches a certain label

### Parameters

-   `label` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

## rpc

Call an RPC action for all those
non-REST endpoints that you may have in
your API.

### Parameters

-   `endpoint` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `options` **{}** 

Returns **[Request](https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/request)** 

## length

Alias for models.length

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

## map

Alias for models.map

### Parameters

-   `callback` **function (model: Model): any** 

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;any>** 

## forEach

Alias for models.forEach

### Parameters

-   `callback` **function (model: Model): void** 

Returns **void** 

## url

Returns the URL where the model's resource would be located on the server.

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

## model

Specifies the model class for that collection

### Parameters

-   `attributes` **{}**  (optional, default `{}`)

## toJS

Returns a JSON representation
of the collection

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;{}>** 

## toArray

Alias of slice

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;Model>** 

## slice

Returns a defensive shallow array representation
of the collection

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;Model>** 

## peek

Returns a shallow array representation
of the collection

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;Model>** 

## isEmpty

Wether the collection is empty

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

## \_ids

Gets the ids of all the items in the collection

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;Id>** 

## at

Get a resource at a given position

### Parameters

-   `index` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

Returns **Model?** 

## get

Get a resource with the given id or uuid

### Parameters

-   `id` **Id** 
-   `$1` **any**  (optional, default `{}`)
    -   `$1.required`   (optional, default `false`)

Returns **Model?** 

## filter

Get resources matching criteria

### Parameters

-   `query` **({} | function (Model): [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean))** 

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;Model>** 

## find

Finds an element with the given matcher

### Parameters

-   `query` **({} | function (Model): [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean))** 
-   `$1` **any**  (optional, default `{}`)
    -   `$1.required`   (optional, default `false`)

Returns **Model?** 

## add

Adds a model or collection of models.

### Parameters

-   `data` **([Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;({} | Model)> | {} | Model)** 

Returns **void** 

## reset

Resets the collection of models.

### Parameters

-   `data` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;({} | Model)>** 

Returns **void** 

## remove

Removes the model with the given ids or uuids

### Parameters

-   `ids` **(Id | Model | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;(Id | Model)>)** 

Returns **void** 

## set

Sets the resources into the collection.

You can disable adding, changing or removing.

### Parameters

-   `resources` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;{}>** 
-   `$1` **any**  (optional, default `{}`)
    -   `$1.add`   (optional, default `true`)
    -   `$1.change`   (optional, default `true`)
    -   `$1.remove`   (optional, default `true`)

Returns **void** 

## build

Creates a new model instance with the given attributes

### Parameters

-   `attributes` **{}**  (optional, default `{}`)

Returns **Model** 

## create

Creates the model and saves it on the backend

The default behaviour is optimistic but this
can be tuned.

### Parameters

-   `attributesOrModel` **({} | Model)** 
-   `$1` **any**  (optional, default `{}`)
    -   `$1.optimistic`   (optional, default `true`)

Returns **[Request](https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/request)** 

## fetch

Fetches the models from the backend.

It uses `set` internally so you can
use the options to disable adding, changing
or removing.

### Parameters

-   `options` **SetOptions**  (optional, default `{}`)

Returns **[Request](https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/request)** 

## toJS

Returns a JSON representation
of the model

## primaryKey

Determine what attribute do you use
as a primary id

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

## urlRoot

Return the base url used in
the `url` method

## url

Return the url for this given REST resource

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

## isNew

Wether the resource is new or not

We determine this asking if it contains
the `primaryKey` attribute (set by the server).

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

## get

Get the attribute from the model.

Since we want to be sure changes on
the schema don't fail silently we
throw an error if the field does not
exist.

If you want to deal with flexible schemas
use `has` to check wether the field
exists.

### Parameters

-   `attribute` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **any** 

## has

Returns whether the given field exists
for the model.

### Parameters

-   `attribute` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

## id

Get an id from the model. It will use either
the backend assigned one or the client.

Returns **Id** 

## changedAttributes

Get an array with the attributes names that have changed.

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** 

## changes

Gets the current changes.

Returns **{}** 

## hasChanges

If an attribute is specified, returns true if it has changes.
If no attribute is specified, returns true if any attribute has changes.

### Parameters

-   `attribute` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

## reset

Replace all attributes with new data

### Parameters

-   `data` **{}** 

Returns **void** 

## set

Merge the given attributes with
the current ones

### Parameters

-   `data` **{}** 

Returns **void** 

## fetch

Fetches the model from the backend.

### Parameters

-   `$0` **any**  (optional, default `{}`)
    -   `$0.data`  
    -   `$0.otherOptions` **...any** 

Returns **[Request](https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/request)** 

## applyPatchChanges

Merges old attributes with new ones.
By default it doesn't merge arrays.

### Parameters

-   `oldAttributes` **{}** 
-   `changes` **{}** 

Returns **{}** 

## save

Saves the resource on the backend.

If the item has a `primaryKey` it updates it,
otherwise it creates the new resource.

It supports optimistic and patch updates.

TODO: Add progress

### Parameters

-   `attributes` **{}** 
-   `$1` **any**  (optional, default `{}`)
    -   `$1.optimistic`   (optional, default `true`)
    -   `$1.patch`   (optional, default `true`)
    -   `$1.keepChanges`   (optional, default `true`)
    -   `$1.otherOptions` **...any** 

Returns **[Request](https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/request)** 

## destroy

Destroys the resurce on the client and
requests the backend to delete it there
too

### Parameters

-   `$0` **any**  (optional, default `{}`)
    -   `$0.optimistic`   (optional, default `true`)
    -   `$0.otherOptions` **...any** 

Returns **[Request](https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/request)** 
